# Backend Instructions

## Stack

- **Runtime**: Node.js + TypeScript
- **Framework**: Express.js
- **Database**: Knex.js (PostgreSQL)
- **Real-time**: Socket.io
- **Auth**: JWT tokens

## Structure

```text
backend/src/
├── config/         # Database, environment config
├── middleware/     # Auth, error handling
├── models/         # Schema definitions
├── routes/         # API endpoints
├── lib/            # Socket.io, utilities
└── index.ts        # Entry point
```

## API Routes

- `/api/auth/*` - Authentication (login, register, session)
- `/api/game/*` - Game mechanics (start, guess, power-ups)
- `/api/admin/*` - Admin panel (upload screenshots, manage games)
- `/api/leaderboard/*` - Rankings and scores

## Development

```bash
npm run dev     # Start with hot reload
npm run build   # TypeScript compilation
npm start       # Production mode
```

## Path Aliases

`@/` resolves to `src/` directory.

## Environment Variables

See `.env.example` for required variables:

- `PORT` - Server port (default: 3000)
- `JWT_SECRET` - Token signing secret
- `DATABASE_URL` - PostgreSQL connection string
- `CORS_ORIGIN` - Frontend URL for CORS

## Socket.io Events

- `join-game` - Player joins live game session
- `leaderboard-update` - Broadcast score changes
- `player-guess` - Real-time guess notification

## Error Handling

Use consistent error response format:

```typescript
res.status(400).json({ error: 'Message here' });
```

## Auth Middleware

Protected routes use `authMiddleware`:

```typescript
router.get('/protected', authMiddleware, handler);
```

<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

*No recent activity*
</claude-mem-context>